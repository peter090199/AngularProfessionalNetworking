<mat-card class="tree-container">
  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="loading-text">Loading...</div>

  <div class="scrollable-tree">
    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
      <!-- Parent Nodes -->
      <mat-tree-node *matTreeNodeDef="let node; when: hasChild" matTreeNodePadding>
        <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.description">
          <mat-icon>{{ treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right' }}</mat-icon>
        </button>
        <mat-checkbox [(ngModel)]="node.access" (change)="toggleAccess(node)">
          {{ node.description }}
        </mat-checkbox>
      </mat-tree-node>

      <!-- Leaf Nodes -->
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodePadding>
        <button mat-icon-button disabled></button>
        <mat-checkbox [(ngModel)]="node.access" (change)="toggleAccess(node)">
          {{ node.description }}
        </mat-checkbox>
      </mat-tree-node>
    </mat-tree>
  </div>

  <div mat-dialog-actions align="end">
    <button type="submit" mat-raised-button color="primary">Update</button>
  </div>
</mat-card>
